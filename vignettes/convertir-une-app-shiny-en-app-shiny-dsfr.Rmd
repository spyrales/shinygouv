---
title: "Convertir une app shiny en app shiny dsfr"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{convertir-une-app-shiny-en-app-shiny-dsfr}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  eval = FALSE
)
```

```{r setup}
library(shinygouv)
```

<!-- WARNING - This vignette is generated by {fusen} from /dev/flat_convert_to_dsfr.Rmd: do not edit by hand -->

# convert_to_dsfr

La fonction convertit tous les composants shiny présents dans les fichiers du dossier "R/" d'une application shiny, en composant dsfr, si et seulement si ceux ci ont été implémentés dans la {version} définie en paramètre.


## Table de correspondance

Elle se base alors sur la table de correspondance des composants implémentés :

Par exemple pour la version "1.7.2" (`v1.7.2/table_correspondance_shiny_dsfr.csv`)


```{r echo = FALSE, message = FALSE}
read.csv2(
  system.file("v1.7.2/table_correspondance_shiny_dsfr.csv", package = "shinygouv")
) %>%
  DT::datatable()
```

## Dépendances

De plus, elle ajoute la dépendance au package {shinygouv} dans le fichier `app_ui.R`


## Conversion

Pour cela, il suffit de lancer dans votre projet contenant l'application shiny:


```{r eval = FALSE}
convert_to_dsfr()
```

Si l'ensemble des scripts `.R` de votre application ne se trouve pas dans un dossier "R/" a la racine de votre projet, vous pouvez passer en argument le `path` du dossier contenant l'ensemble de ces fichiers.
Comme par exemple:


```{r eval = FALSE}
convert_to_dsfr(path = "le_chemin_de_mon_application")
```

*Attention*, dans le cadre d'une application hors {golem}, vous devrez ajouter la dépendance à {shinygouv} pour que votre application puisse utiliser les composants dsfr


```{r examples-convert_to_dsfr}
mydir <- tempfile(pattern = "app")
dir.create(mydir)
golem::install_dev_deps(
  force_install = TRUE
)
golem::create_golem(
  mydir,
  overwrite = TRUE,
  open = FALSE
)
convert_to_dsfr(path = file.path(mydir, "R"))
```

# Connaître la version du dsfr actuelle


Pour savoir quelle version du dsfr est utilisée dans votre installation de {shinygouv}, vous pouvez exécuter `get_dsfr_version()`




```{r example-get_dsfr_version}
get_dsfr_version()
get_dsfr_version(with_v = TRUE)
```





