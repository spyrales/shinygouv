---
title: "Convertir une app shiny en app shiny DSFR"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{util_1_convertir-une-app-shiny-en-app-shiny-dsfr}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
options(rmarkdown.html_vignette.check_title = FALSE)
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(shinygouv)
```

<!-- WARNING - This vignette is generated by {fusen} from /dev/flat_convert_to_dsfr.Rmd: do not edit by hand -->

# Fonction `convert_to_dsfr()` 

La fonction `convert_to_dsfr()` a été pensée pour faciliter la conversion d'applications Shiny existantes au Design system de l'Etat. 


## Principe : Réécriture d'une application existante 

La fonction convertit tous les composants shiny présents dans les fichiers du dossier "R/" d'une application shiny en composants shinygouv dsfr, dès lors qu'ils existent et qu'ils ont été implémentés dans le package. 

Attention, cette fonction modifie les fonctions des composants UI de votre application existante. 
Pour un simple test, appliquez là sur une copie. 
 

## Dépendances

Le fonction `convert_to_dsfr()` ajoute automatiquement la dépendance au package {shinygouv} dans le fichier `app_ui.R` de votre application shiny Golem.

Dans le cadre d'une application non packagée avec {golem}, vous devrez ajouter à la main la dépendance à {shinygouv}, souvent avec un `library(shinygouv)` dans votre fichier global.R. 


## Conversion

La conversion est réalisée en lançant dans votre projet contenant l'application shiny : 


```{r eval = FALSE}
convert_to_dsfr()
```

Si l'ensemble des scripts `.R` de votre application ne se trouvent pas dans un dossier "R/" à la racine de votre projet, vous pouvez passer en argument le `path` du dossier contenant l'ensemble de ces fichiers. 

Comme par exemple: 

```{r eval = FALSE}
convert_to_dsfr(path = "le_chemin_de_mon_application")
```


# Quels sont les composants implémentés dans {shinygouv} ?

Les composants d'interface utilisateur implémentés dans `{shinygouv}` et leur correspondance avec les fonctions habituelles de `{Shiny}` sont listées ici :  


```{r echo = FALSE, message = FALSE}
read.csv2(
  system.file(get_dsfr_version(with_v = TRUE), "/table_correspondance_shiny_dsfr.csv", package = "shinygouv")
) %>% 
  dplyr::select(composant_shiny, composant_dsfr) %>% 
  DT::datatable()
```

Ils ne sont pas encore très nombreux, n'hésitez pas à contribuer, un guide est là pour vous aider à rejoindre les auteurs de {shinygouv} !

# Connaître la version du dsfr actuelle

Pour savoir quelle version du DSFR est utilisée dans votre installation de {shinygouv}, vous pouvez exécuter `get_dsfr_version()`
    
```{r example-get_dsfr_version}

get_dsfr_version()

```

