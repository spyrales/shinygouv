---
title: 'Guide du dÃ©veloppeur'
output: github_document
vignette: >
  %\VignetteIndexEntry{Dev-A-guide-du-developpeur}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = FALSE)
```

Ceci est un dossier de documentation dÃ©diÃ© aux dÃ©veloppeurs et dÃ©veloppeuses. 


## Contribuer Ã  {shinygouv} - Introduction
Pour des contributions au code de ce projet, svp regardez le guide gÃ©nÃ©ral de contribution Ã  https://spyrales.github.io/shinygouv/CONTRIBUTING.html

## Structuration du repo (a complÃ©ter)

Le dÃ©veloppement de ce package a Ã©tÃ© rÃ©alisÃ© [avec {fusen}](https://thinkr-open.github.io/fusen/) : les fonctions, vignettes et test sont gÃ©nÃ©rÃ©es par des fichiers Rmd dans le dossier /dev.  

Le repo contient deux app : 
- une app de demo des composant de shinygouv : que l'on peut visualiser avec shinygouv::run_app(), 
- une app de test pour la fonction de conversion convert_to_dsfr(), prÃ©sente dans "inst/test.convert.dsfr/".


## Version du framework dsfr en cours de dÃ©veloppement

Pour s'assurer du bon dÃ©veloppement du package `shinygouv`, il a Ã©tÃ© ajoutÃ© au fichier `DESCRIPTION` la version du dsfr utilisÃ©.

Pour connaÃ®tre la version utilisÃ©e, vous pouvez lancer :

```{r}
desc::desc_get("VersionDsfr")
```

## Ajouter une nouvelle version du dsfr

Si vous devez implÃ©menter une nouvelle version du dsfr, vous devez suivre les instructions disponible: [Montee en version du dsfr : trouver les fichiers CSS et JS](Dev-C-montee-en-version-du-dsfr-trouver-les-fichiers-css-et-js.md).

Lorsque vous aurez implÃ©mentÃ© toutes les composantes avec la nouvelle version, vous pourrez mettre Ã  jour le fichier DESCRIPTION avec la commande suivante :

```{r, eval=FALSE}
desc::desc_set("VersionDsfr" = "1.7.2")
```

#### Ressources utiles :   

- Notes de versions du dsfr https://www.systeme-de-design.gouv.fr/a-propos/versions/version-courante 
- Notes de versions shiny : https://github.com/rstudio/shiny/blob/main/NEWS.md


## Workflow Ã  suivre avant de dev sur le projet :

### Ajouter le template de commit :

```
git config --local commit.template .github/template_commit
```

### Suivre cette convention pour les commits et les tags :

- Un mot clÃ© et un titre en dÃ©but de message pour dire le principal objectif de ce commit.
- Une ligne `tags` qui reprend les mots clÃ©s pour ce qui est fait dans le commit

Voici un exemple :

```
feat: ma fonctionnalitÃ© de ouf

# Tags possibles du plus au moins important :
Tags: ci, fix, feat, doc, test, style, chore

Pourquoi ?

Quoi ?
   
Tickets

```

Et voici la liste des tags possible dans l'ordre d'importance pour le choix du tag majeur dans le titre du commit :

```
ci : tout ce qui touche au ci, meme les fix du ci pour l'instant
fix : correction d'un bug dans la code base
feat : l'ajout d'une nouvelle feature
doc : doc du package, on devrait voir que Ã§a la sur ces 3 jours en gros
test: pour les tests unitaires
style : pour la mise en forme de code
chore : tout ce qui touche au projet en lui mÃªme, ne correspond pas Ã  un feat ou un fix
```
### S'assurer d'avoir une issue Ã  rÃ©soudre

- Dans le cadre de l'ajout d'un nouveau composant, vous pouvez crÃ©er une issue avec le template d'issue "composant"
    + Il se trouve sur GitHub Ã  la crÃ©ation d'une issue, ou dans le package: ".github/ISSUE_TEMPLATE/composant.md"

### DÃ©velopper dans une branche

- Chaque dÃ©veloppement se fait dans une nouvelle branche
    + Elle est nommÃ©e Ã  partir du numÃ©ro de l'issue Ã  traiter
- Les dÃ©veloppements sont intÃ©grÃ©s Ã  la branche principale aprÃ¨s demande de PR de votre branche vers la branche principale


## Comprendre et appliquer le workflow pour dÃ©velopper le package

Pour dÃ©velopper ce package, des choix techniques ont Ã©tÃ© adoptÃ©s. Vous retrouverez les raisons [ici](Hist-B-documentation-inventaire.md).

Le workflow se dÃ©coupe en deux possibilitÃ©s :

- Les composants nÃ©cessitant de la rÃ©activitÃ©
- Les composants sans rÃ©activitÃ©

Ces deux possibilitÃ©s se basent sur le mÃªme principe : **l'utilisation des templates html**. La trame gÃ©nÃ©rale de ce workflow est dÃ©finie dans la documentation : 

- [Comment faire un composant shiny](Dev-B-comment-faire-un-composant-shiny.md)

Vous trouverez des exemples pour d'autres composants :

- Avec rÃ©activitÃ©:
  - [radio buttons](https://github.com/spyrales/shinygouv/blob/main/dev/flat_composants/flat_radioButtons.Rmd)
  
- Sans rÃ©activitÃ©:
  - [Fluid page](https://github.com/spyrales/shinygouv/blob/main/dev/flat_composants/flat_fluidpage.Rmd)
 
N'hÃ©sitez pas Ã  amender cette liste au fur et Ã  mesure de vos dÃ©veloppements 

## Workflow avant de commit

Pensez Ã  exÃ©cuter les lignes "Each time needed" du fichier [dev/02_dev.R](https://github.com/spyrales/shinygouv/blob/main/dev/02_dev.R) avant chaque commit.

```{r, eval=FALSE}
rstudioapi::navigateToFile("dev/02_dev.R")
```

<!-- ## Ressource JS, HTML et CSS : a complÃ©ter et lier au reste -->
<!-- https://connect.thinkr.fr/js4shinyfieldnotes/# -->

## Les langues utilisÃ©es dans le projet

- Rapports d'exploration (prÃ©sentÃ©s en vignettes) : ğŸ‡«ğŸ‡· 
- Vignettes utilisateurs: les vignettes qui expliquent comment utiliser les fonctions du package ğŸ‡«ğŸ‡· 
- Contenu du Readme ğŸ‡«ğŸ‡· 
- Documentation {roxygen2} des fonctions ğŸ‡«ğŸ‡· 
- Messages de commit (de prÃ©fÃ©rence en anglais, par habitude chez nous) ğŸ‡«ğŸ‡· 
- Description des tests unitaires (de prÃ©fÃ©rence en anglais) ğŸ‡«ğŸ‡· 
- Code of Conduct: template par dÃ©faut de {usethis} en anglais dÃ©jÃ  prÃ©sent comme pour {gouvdown} ğŸ‡¬ğŸ‡§ 
- Contributing: template par dÃ©faut de {usethis} en anglais peut Ãªtre ajoutÃ© comme pour {gouvdown} ğŸ‡¬ğŸ‡§ 
