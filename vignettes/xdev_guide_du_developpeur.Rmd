---
title: "Guide du d√©veloppeur"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{xdev_guide_du_developpeur}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
options(rmarkdown.html_vignette.check_title = FALSE)
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  echo = TRUE
)
```

Ceci est un dossier de documentation d√©di√© aux d√©veloppeurs et d√©veloppeuses. Il contient les choix de mode de d√©veloppement et tout autre guide qui ne s'adresserait pas directement aux utilisateurs.

## Contribuer √† {shinygouv} - Introduction

Ces quelques lignes expliquent comment contribuer √† {shinygouv}.  

For specific code contributions to this project, please read the documentation in "dev/documentation/README.Rmd"

For more detailed info about contributing to a package on GitHub, please see the
[**development contributing guide**](https://rstd.io/tidy-contrib). 

### Fixing typos

You can fix typos, spelling mistakes, or grammatical errors in the documentation directly using the GitHub web interface, as long as the changes are made in the _source_ file. 
This generally means you'll need to edit [roxygen2 comments](https://roxygen2.r-lib.org/articles/roxygen2.html) in an `.R`, do not edit a `.Rd` file. 
You can find the `.R` file that generates the `.Rd` by reading the comment in the first line.

### Bigger changes

If you want to make a bigger change, it's a good idea to first file an issue and make sure someone from the team agrees that it‚Äôs needed. 
If you‚Äôve found a bug, please file an issue that illustrates the bug with a minimal 
[reprex](https://www.tidyverse.org/help/#reprex) (this will also help you write a unit test, if needed).

#### Pull request process

*   Fork the package and clone onto your computer. If you haven't done this before, we recommend using `usethis::create_from_github("spyrales/shinygouv", fork = TRUE)`.

*   Install all development dependencies with `devtools::install_dev_deps()`, and then make sure the package passes R CMD check by running `devtools::check()`. 
    If R CMD check doesn't pass cleanly, it's a good idea to ask for help before continuing. 
*   Create a Git branch for your pull request (PR). We recommend using `usethis::pr_init("brief-description-of-change")`.

*   Make your changes, commit to git, and then create a PR by running `usethis::pr_push()`, and following the prompts in your browser.
    The title of your PR should briefly describe the change.
    The body of your PR should contain `Fixes #issue-number`.

*  For user-facing changes, add a bullet to the top of `NEWS.md` (i.e. just below the first header). Follow the style described in <https://style.tidyverse.org/news.html>.

#### Code style

*   New code should follow the tidyverse [style guide](https://style.tidyverse.org). 
    You can use the [styler](https://CRAN.R-project.org/package=styler) package to apply these styles, but please don't restyle code that has nothing to do with your PR.  

*  We use [roxygen2](https://cran.r-project.org/package=roxygen2), with [Markdown syntax](https://cran.r-project.org/web/packages/roxygen2/vignettes/rd-formatting.html), for documentation.  

*  We use [testthat](https://cran.r-project.org/package=testthat) for unit tests. 
   Contributions with test cases included are easier to accept.  

### Code of Conduct

Please note that the shinygouv project is released with a
[Contributor Code of Conduct](CODE_OF_CONDUCT.md). By contributing to this
project you agree to abide by its terms.

## Parti pris de d√©veloppement




Ceci est un dossier de documentation d√©di√© aux d√©veloppeurs et d√©veloppeuses. Il contient les choix de mode de d√©veloppement et tout autre document qui ne s'adresserait pas directement aux utilisateurs.

## Presentation du repo 


## Version du framework dsfr en cours de d√©veloppement

Pour s'assurer du bon developpement du package `shinygouv`, il a √©t√© ajout√© au fichier `DESCRIPTION` la version du dsfr utilis√©.

Pour conna√Ætre la version utilis√©e, vous pouvez lancer :

```{r}
desc::desc_get("VersionDsfr")
```

## Ajouter une nouvelle version du dsfr

Si vous souhaitez impl√©menter une nouvelle version du dsfr, vous devez suivre les instructions dans "dev/flat_montee_version_dsfr.Rmd".  

```{r eval = FALSE}
rstudioapi::navigateToFile("dev/flat_montee_version_dsfr.Rmd")
```

Lorsque vous aurez impl√©ment√© toutes les composantes avec la nouvelle version, vous pourrez mettre √† jour le fichier DESCRIPTION avec la commande suivante :

```{r, eval=FALSE}
desc::desc_set("VersionDsfr" = "1.7.2")
```


## Workflow √† suivre avant de dev sur le projet :

### Ajouter le template de commit :

```
git config --local commit.template .github/template_commit
```

### Suivre cette convention pour les commits et les tags :

- Un mot cl√© et un titre en d√©but de message pour dire le principal objectif de ce commit.
- Une ligne `tags` qui reprend les mots cl√©s pour ce qui est fait dans le commit

Voici un exemple :

```
feat: ma fonctionnalit√© de ouf

# Tags possibles du plus au moins important :
Tags: ci, fix, feat, doc, test, style, chore

Pourquoi ?

Quoi ?
   
Tickets

```

Et voici la liste des tags possible dans l'ordre d'importance pour le choix du tag majeur dans le titre du commit :

```
ci : tout ce qui touche au ci, meme les fix du ci pour l'instant
fix : correction d'un bug dans la code base
feat : l'ajout d'une nouvelle feature
doc : doc du package, on devrait voir que √ßa la sur ces 3 jours en gros
test: pour les tests unitaires
style : pour la mise en forme de code
chore : tout ce qui touche au projet en lui m√™me, ne correspond pas √† un feat ou un fix
```
### S'assurer d'avoir une issue √† r√©soudre

- Dans le cadre de l'ajout d'un nouveau composant, vous pouvez cr√©er une issue avec le template d'issue "composant"
    + Il se trouve sur GitHub √† la cr√©ation d'une issue, ou dans le package: ".github/ISSUE_TEMPLATE/composant.md"

### D√©velopper dans une branche

- Chaque d√©veloppement se fait dans une nouvelle branche
    + Elle est nomm√©e √† partir du num√©ro de l'issue √† traiter
- Les d√©veloppements sont int√©gr√©s √† la branche principale apr√®s demande de PR de votre branche vers la branche principale


## Comprendre et appliquer le workflow pour d√©velopper le package

Pour d√©velopper ce package, des choix techniques ont √©t√© adopt√©s. Vous retrouverez les raisons [ici](explo_shiny.dsfr.md).

Le workflow se d√©coupe en deux possibilit√©s :

- Les composants n√©cessitant de la r√©activit√©
- Les composants sans r√©activit√©

Ces deux possibilit√©s se basent sur le m√™me principe : **l'utilisation des templates html**. La trame g√©n√©rale de ce workflow est d√©finie dans la documentation : 

- [Comment faire un composant shiny](comment-faire-un-composant-shiny.md)

Vous trouverez des exemples pour d'autres composants :

- Avec r√©activit√©:
  - [radio buttons](radiobuttons-dsfr.md)
  
- Sans r√©activit√©:
  - [Fluid page](fluidpage_dsfr.md)
 
N'h√©sitez pas √† amender cette liste au fur et √† mesure de vos d√©veloppements 

## Les langues utilis√©es dans le projet

- Rapports d'exploration (pr√©sent√©s en vignettes) : üá´üá∑ 
- Vignettes utilisateurs: les vignettes qui expliquent comment utiliser les fonctions du package üá´üá∑ 
- Contenu du Readme üá´üá∑ 
- Documentation {roxygen2} des fonctions üá´üá∑ 
- Messages de commit (de pr√©f√©rence en anglais, par habitude chez nous) üá´üá∑ 
- Description des tests unitaires (de pr√©f√©rence en anglais) üá´üá∑ 
- Code of Conduct: template par d√©faut de {usethis} en anglais d√©j√† pr√©sent comme pour {gouvdown} üá¨üáß 
- Contributing: template par d√©faut de {usethis} en anglais peut √™tre ajout√© comme pour {gouvdown} üá¨üáß 

## Les packages n√©c√©ssaires au developpement

En plus des d√©pendances du package, un ensemble de packages sera n√©cessaire pour le bon d√©veloppement du package.

Vous retrouverez cette liste dans le fichier `dev/pkgs_deps.csv`.

## Workflow avant de commit

Pensez √† ex√©cuter les lignes "Each time needed" du fichier `dev/dev_history_package.R` avant chaque commit.

```{r, eval=FALSE}
rstudioapi::navigateToFile("dev/dev_history_package.R")
```


