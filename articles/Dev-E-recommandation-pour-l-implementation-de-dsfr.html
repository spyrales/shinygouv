<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recommandation pour l'implementation de DSFR • shinygouv</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Recommandation pour l'implementation de DSFR">
<meta property="og:description" content="shinygouv">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">shinygouv</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Référence</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/A-convertir-une-app-shiny-en-app-shiny-dsfr.html">Convertir une app shiny en app shiny dsfr</a>
    </li>
    <li>
      <a href="../articles/B-comment-demarrer-une-nouvelle-application-shiny-dsfr.html">Comment demarrer une nouvelle application shiny dsfr</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="../articles/index.html">Plus d'articles...</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changements</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Recommandation pour l’implementation de
DSFR</h1>
            
      
      
      <div class="hidden name"><code>Dev-E-recommandation-pour-l-implementation-de-dsfr.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">shinygouv</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="comparaison-entre-les-différentes-possibilités-pour-répondre-au-besoin-dutilisation-du-framework-dsfr">Comparaison entre les différentes possibilités pour répondre au
besoin d’utilisation du framework <a href="https://gouvfr.atlassian.net/wiki/spaces/DB/overview?homepageId=145359476" class="external-link">DSFR</a><a class="anchor" aria-label="anchor" href="#comparaison-entre-les-diff%C3%A9rentes-possibilit%C3%A9s-pour-r%C3%A9pondre-au-besoin-dutilisation-du-framework-dsfr"></a>
</h4>
<p>Pour ce faire, nous avons rédigé un tableau comparatif entre les
éléments trouvés dans le framework DSFR et {shiny}. Il permet notamment
de mettre en évidence la direction technique à employer selon deux
méthodes envisagées pour utiliser DSFR dans une application {shiny}.</p>
</div>
<div class="section level2">
<h2 id="récapitulatif">Récapitulatif<a class="anchor" aria-label="anchor" href="#r%C3%A9capitulatif"></a>
</h2>
<div class="section level4">
<h4 id="option-a-shiny-bslib">Option A {shiny} + {bslib} :<a class="anchor" aria-label="anchor" href="#option-a-shiny-bslib"></a>
</h4>
<p>Utiliser les fonctionalités de {bslib} pour utiliser le framework
DSFR.</p>
<p>Avantages :</p>
<ul>
<li>Simple d’utilisation, une fonction ou deux pour appliquer le bon
thème bootstrap qui reprend les règles CSS de DSFR</li>
</ul>
<p>Inconvénients:</p>
<ul>
<li>Limiter par les paramètres modifiables.</li>
<li>Nécéssiterait de transformer le CSS de DSFR pour une compatibilité
avec bootstrap (ce qui semble être un non-sens :)).</li>
<li>Il faut maintenir le thème DSFR qui est le résultat de la
transformation du CSS. Donc une connaissance assez élevée sur bootstrap
et DSFR.</li>
</ul>
<p>ThinkR ne peut garantir le succès de cette méthode. Cette méthode n’a
jamais été expérimentée.</p>
</div>
<div class="section level4">
<h4 id="option-b-shiny-et-replace_me">Option B {shiny} et replace_me :) :<a class="anchor" aria-label="anchor" href="#option-b-shiny-et-replace_me"></a>
</h4>
<p>On utilise seulement le package {shiny} avec des scripts au démarrage
pour remplacer les classes bootstrap par les classes de DSFR. Voici une
app qui le fait <a href="https://github.com/MTES-MCT/dseshiny/blob/main/dseshiny/R/dse_ui_regexp.R" class="external-link uri">https://github.com/MTES-MCT/dseshiny/blob/main/dseshiny/R/dse_ui_regexp.R</a></p>
<p>Exemple pour le actionButton:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/resourcePaths.html" class="external-link">addResourcePath</a></span><span class="op">(</span><span class="st">"fonts"</span>, <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"dsfr-v1.6.0/dist/fonts"</span>, package <span class="op">=</span> <span class="st">"shinygouv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/include.html" class="external-link">includeCSS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"dsfr-v1.6.0/dist/dsfr.min.css"</span>, package <span class="op">=</span> <span class="st">"shinygouv"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h2</a></span><span class="op">(</span><span class="st">"Exemple avec un bouton"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span><span class="st">"test"</span>, <span class="st">"test"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">textOutput</a></span><span class="op">(</span><span class="st">"texte"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">remplace_bttn</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">ui</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rapply.html" class="external-link">rapply</a></span><span class="op">(</span></span>
<span>    <span class="va">ui</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">attribut</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="va">attribut</span>,</span>
<span>        pattern <span class="op">=</span> <span class="st">"btn btn-default"</span>,</span>
<span>        replacement <span class="op">=</span> <span class="st">"fr-btn"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    how <span class="op">=</span> <span class="st">"replace"</span>,</span>
<span>    classes <span class="op">=</span> <span class="st">"character"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">texte</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html" class="external-link">renderText</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="va">input</span><span class="op">$</span><span class="va">test</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="fu">remplace_bttn</span><span class="op">(</span><span class="va">ui</span><span class="op">)</span>, <span class="va">server</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/option_b_btn.png"></p>
<p>Avantages:</p>
<ul>
<li>Facile à mettre en oeuvre pour les utilisateurs.</li>
<li>Ne change pas les fonctions {shiny} à utiliser.</li>
<li>Applicable sur une application déjà existante.</li>
</ul>
<p>Inconvénients:</p>
<ul>
<li>Limiter par ce que propose {shiny}. On ne peut appliquer que les
classes DSFR qui ont un équivalent déjà existantes dans bootstrap.</li>
<li>Cela réécrit le code au lancement de l’application et peut donc
altérer l’expérience utilisateur.</li>
<li>Ne permet pas d’appliquer les règles d’utilisations des différents
composants de DSFR.</li>
<li>Double travail : il faut maintenir un tableau de correspondance
entre les deux frameworks. Donc une connaissance assez élevée sur les
deux.</li>
</ul>
</div>
<div class="section level4">
<h4 id="option-c-from-scratch">Option C <code>From scratch</code><a class="anchor" aria-label="anchor" href="#option-c-from-scratch"></a>
</h4>
<p>Coder l’équivalent de la partie ‘UI’ {shiny} (ou quasiment) avec le
framework DSFR. La partie ‘server’ reposera toujours sur la partie
{shiny}. Un exemple : <a href="https://gitlab-forge.din.developpement-durable.gouv.fr/dreal-pdl/csd/shiny.dsfr" class="external-link uri">https://gitlab-forge.din.developpement-durable.gouv.fr/dreal-pdl/csd/shiny.dsfr</a>
et aussi <a href="https://github.com/ThinkR-open/w3css" class="external-link uri">https://github.com/ThinkR-open/w3css</a></p>
<p>Exemple de code pour actionButton :</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/resourcePaths.html" class="external-link">addResourcePath</a></span><span class="op">(</span><span class="st">"fonts"</span>, <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"dsfr-v1.6.0/dist/fonts"</span>, package <span class="op">=</span> <span class="st">"shinygouv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">actionButton_dsfr</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputId</span>, <span class="va">label</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="va">inputId</span>,</span>
<span>    class <span class="op">=</span> <span class="st">"fr-btn"</span>,</span>
<span>    value <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    <span class="va">label</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="va">tags</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/include.html" class="external-link">includeCSS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"dsfr-v1.6.0/dist/dsfr.min.css"</span>, package <span class="op">=</span> <span class="st">"shinygouv"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">script</span><span class="op">(</span></span>
<span>      <span class="st">"$(document).on('click', '.fr-btn', function(evt) {</span></span>
<span><span class="st">  var el = evt.target;</span></span>
<span><span class="st">  while (el.nodeName != 'BUTTON'){</span></span>
<span><span class="st">    el = el.parentNode;</span></span>
<span><span class="st">  }</span></span>
<span><span class="st">  el = $(el);</span></span>
<span><span class="st">  el.val( parseInt(el.val()) + 1)</span></span>
<span><span class="st">  el.trigger('updated');</span></span>
<span><span class="st">});</span></span>
<span><span class="st">    var buttons = new Shiny.InputBinding();</span></span>
<span><span class="st"></span></span>
<span><span class="st">$.extend(buttons, {</span></span>
<span><span class="st">  find: function(scope) {</span></span>
<span><span class="st"></span></span>
<span><span class="st">    return $(scope).find('.fr-btn')</span></span>
<span><span class="st">  },</span></span>
<span><span class="st">  getValue: function(el) {</span></span>
<span><span class="st">    console.log($(el))</span></span>
<span><span class="st">    return parseInt($(el).val())</span></span>
<span><span class="st">  },</span></span>
<span><span class="st">  setValue: function(el, value) {</span></span>
<span><span class="st">    // JS code to set value</span></span>
<span><span class="st">  },</span></span>
<span><span class="st">  receiveMessage: function(el, data) {</span></span>
<span><span class="st">    // this.setValue(el, data);</span></span>
<span><span class="st">  },</span></span>
<span><span class="st">  subscribe: function(el, callback) {</span></span>
<span><span class="st">    $(el).on('updated.buttons', function(e) {</span></span>
<span><span class="st">      callback();</span></span>
<span><span class="st">    });</span></span>
<span><span class="st"></span></span>
<span><span class="st">  },</span></span>
<span><span class="st">  unsubscribe: function(el) {</span></span>
<span><span class="st">    $(el).off('.buttons');</span></span>
<span><span class="st">  }</span></span>
<span><span class="st">});</span></span>
<span><span class="st">Shiny.inputBindings.register(buttons);"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/actionButton_dsfr.html">actionButton_dsfr</a></span><span class="op">(</span><span class="st">"test"</span>, <span class="st">"test"</span><span class="op">)</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">test</span>, <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">test</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></code></pre></div>
<p>Ceci sera transformé en fonction et documenter dans un package</p>
<p>Avantages :</p>
<ul>
<li>Permet de reprendre exactement la totalité des composants de
DSFR</li>
<li>Ne dépend plus de bootstrap et {shiny} (mais n’est pas
incompatible)</li>
<li>Permet de maintenir seulement les changements liés à DSFR</li>
<li>C’est la façon la plus propre et la solution la plus pérenne dans le
temps pour les utilisateurs</li>
</ul>
<p>Inconvénients:</p>
<ul>
<li>Nécéssite plus de développement et donc de temps</li>
<li>Oblige les utilisateurs à remplacer les fonctions {shiny} par les
fonctions DSFR</li>
<li>Bonne connaissance en JS pour maintenir le package</li>
</ul>
<p>On peut tout à fait imaginer une fonction qui parserait le code pour
remplacer les appels à {shiny} avec les fonctions {DSFR}.</p>
</div>
<div class="section level4">
<h4 id="option-d-from-scratch-mais-pas-vraiement">Option D <code>from scratch mais pas vraiement</code><a class="anchor" aria-label="anchor" href="#option-d-from-scratch-mais-pas-vraiement"></a>
</h4>
<p>On pourrait recoder les inputs en conservant les classes CSS qui
permettent l’activation du backend JS (comme pour shinyWidgets).</p>
<p>Exemple pour le actionButton de {shinyWidgets} <a href="https://github.com/dreamRs/shinyWidgets/blob/46359eccb5cfaac80cbe2949da231e3416afcc37/R/actionBttn.R#L63" class="external-link uri">https://github.com/dreamRs/shinyWidgets/blob/46359eccb5cfaac80cbe2949da231e3416afcc37/R/actionBttn.R#L63</a></p>
<p>Ou pour notre actionButon :</p>
<p>Le fait de lui donner la classe action-button lui permet d’être
reconnu par le JS de {shiny} et donc d’avoir une interaction. De même,
le fait de lui donner la classe fr-btn en plus, lui permet d’être
reconnu par le CSS du DSFR.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/resourcePaths.html" class="external-link">addResourcePath</a></span><span class="op">(</span><span class="st">"fonts"</span>, <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"dsfr-v1.6.0/dist/fonts"</span>, package <span class="op">=</span> <span class="st">"shinygouv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">actionButton_dsfr</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputId</span>, <span class="va">label</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="va">inputId</span>,</span>
<span>    class <span class="op">=</span> <span class="st">"fr-btn action-button"</span>,</span>
<span>    value <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    <span class="va">label</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/include.html" class="external-link">includeCSS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"dsfr-v1.6.0/dist/dsfr.min.css"</span>, package <span class="op">=</span> <span class="st">"shinygouv"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/actionButton_dsfr.html">actionButton_dsfr</a></span><span class="op">(</span><span class="st">"test"</span>, <span class="st">"test"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">test</span>, <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">test</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></code></pre></div>
<p>Avantages :</p>
<ul>
<li>Permet de reprendre le JS de {shiny} pour les composants compatibles
DSFR (exemple actionButton)</li>
</ul>
<blockquote>
<p>Néanmoins, le temps gagné sur les inputs basiques pourrait permettre
d’implementer de nouveaux inputs si nécéssaire</p>
</blockquote>
<ul>
<li>Implementation plus simple pour les composants compatibles.</li>
<li>Pas besoin de connaissances avancées en JS pour les composants
compatibles.</li>
</ul>
<p>Inconvénients :</p>
<ul>
<li>Liée au package {shiny} et aux inputs implémentés</li>
<li>Si l’input n’existe pas dans {shiny}, alors il faudra recoder la
partie JS (c’est vrai pour les options A et B)</li>
<li>Maintenance : suivre {shiny} et DSFR. Autrement dit, si la classe de
l’input {shiny} devient autre chose que <code>action-button</code> notre
code ne marchera plus (peu probable…).</li>
</ul>
<p>Les changements sont énumérés:</p>
<ul>
<li>pour shiny: <a href="https://shiny.rstudio.com/reference/shiny/1.7.0/upgrade.html" class="external-link uri">https://shiny.rstudio.com/reference/shiny/1.7.0/upgrade.html</a>
</li>
<li>pour DSFR: <a href="https://gouvfr.atlassian.net/wiki/spaces/DB/pages/1028030465/Version+1.6.0" class="external-link uri">https://gouvfr.atlassian.net/wiki/spaces/DB/pages/1028030465/Version+1.6.0</a>
</li>
</ul>
<p>On peut tout à fait imaginer une fonction qui parserait le code pour
remplacer les appels à {shiny} avec les fonctions {DSFR}.</p>
</div>
<div class="section level3">
<h3 id="les-inputs-recensés-dans-les-apps-ssm-écologie-par-option">Les inputs recensés dans les apps “ssm-écologie” par option<a class="anchor" aria-label="anchor" href="#les-inputs-recens%C3%A9s-dans-les-apps-ssm-%C3%A9cologie-par-option"></a>
</h3>
<p>Les éléments tels que navbarpage, tabpanel etc sont possible dans la
limite de ce que propose DSFR. Ils nécéssitent plus ou moins une
demi-journée par composant (codé avec des htmlTemplates).</p>
</div>
<div class="section level3">
<h3 id="notre-recommandation">Notre recommandation<a class="anchor" aria-label="anchor" href="#notre-recommandation"></a>
</h3>
<p>Nous préconisons l’<strong>option D</strong>. Pourquoi ?</p>
<p>Cette aprroche permet de mettre en avant le travail réalisé sur le
framework DSFR avec une implementation possible de l’intégralité des
fonctionnalités sans la contrainte et la lourdeur de connaitre le JS.
Elle permet aussi de faciliter la maintenance du package par les futures
mainteneurs. Bien que cette option ne réponde pas directement à
l’objectif :
<code>éviter d'avoir des fonctions spécifiques pour ne pas géner le passage d'un template à un autre</code>,
on peut tout à fait imaginer une fonction qui parserait le code pour
remplacer les appels à {shiny} avec les fonctions {DSFR}.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Développé par Juliette ENGELARE-LEFEBVRE, Sébastien Rochette, Murielle Delmotte, Cervan Girard, Yohann Mansiaux.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site créé avec <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
